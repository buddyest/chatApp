/*! chatApp 2019-12-11 */

const socket=io("http://localhost:3000"),messageContainer=document.getElementById("message-container"),roomContainer=document.getElementById("room-container"),messageForm=document.getElementById("send-container"),messageInput=document.getElementById("message-input"),userContainer=document.getElementById("active-users");if(null!=messageForm){const e=prompt("What is your name?");appendMessage("You joined"),socket.emit("new-user",roomName,e),messageForm.addEventListener("submit",e=>{e.preventDefault();const n=messageInput.value;appendMessage(`You: ${n}`),socket.emit("send-chat-message",roomName,n),messageInput.value=""})}function appendMessage(e){const n=document.createElement("div");n.innerText=e,messageContainer.append(n)}socket.on("room-created",e=>{const n=document.createElement("div");n.innerText=e;const t=document.createElement("a");t.href=`/${e}`,t.innerText="join",roomContainer.append(n),roomContainer.append(t)}),socket.on("chat-message",e=>{appendMessage(`${e.name}: ${e.message}`)}),socket.on("user-connected",e=>{appendMessage(`${e} connected`)}),socket.on("user-disconnected",e=>{appendMessage(`${e} disconnected`)});